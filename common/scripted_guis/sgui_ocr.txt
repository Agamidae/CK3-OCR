quicksave = {
	effect = {
		send_interface_toast = {
		    title = "game_saved"
		}
	}
}

followers = {
	effect = {
		clear_variable_list = followers
		ordered_faith_character = {
			order_by = current_military_strength
			min = 0
			root = {
				add_to_variable_list = {
					name = followers
					target = prev
				}
			}
		}
	}
}

destroy_artifact = {
	confirm_title = "Confirm destroying artifact."
	effect = {
		destroy_artifact = root
	}
}

artifacts_list = {
	effect = {
		clear_variable_list = all_artifacts

		if = {
			limit = {
				NOT = { exists = var:sort_artifacts }
			}
			set_variable = {
				name = sort_artifacts
				value = flag:rarity
			}
		}

		if = {
			limit = {
				NOT = { exists = var:filter_artifacts }
			}
			set_variable = {
				name = filter_artifacts
				value = flag:all
			}
		}

		every_artifact = {
			limit = {
				trigger_if = {
					limit = { exists = root.var:filter_artifacts root.var:filter_artifacts = flag:helmet }
					artifact_slot_type = helmet
				}
				trigger_else_if = {
					limit = { exists = root.var:filter_artifacts root.var:filter_artifacts = flag:primary_armament }
					artifact_slot_type = primary_armament
				}
				trigger_else_if = {
					limit = { exists = root.var:filter_artifacts root.var:filter_artifacts = flag:armor }
					artifact_slot_type = armor
				}
				trigger_else_if = {
					limit = { exists = root.var:filter_artifacts root.var:filter_artifacts = flag:regalia }
					artifact_slot_type = regalia
				}
				trigger_else_if = {
					limit = { exists = root.var:filter_artifacts root.var:filter_artifacts = flag:miscellaneous }
					artifact_slot_type = miscellaneous
				}
				trigger_else = { }
			}
			add_to_list = all_artifacts
		}

		switch = {
			trigger = var:sort_artifacts

			flag:rarity = {
				add_to_ledger = { list = all_artifacts x = artifact_rarity_svalue }
			}

			flag:distance = {
				ordered_in_list = {
					list = all_artifacts
					order_by = {
						value = artifact_owner.location.distance_to_player
						multiply = -1
					}
					min = 0

					root = {
						add_to_variable_list = {
							name = all_artifacts
							target = prev
						}
					}
				}
			}
		}
	}
}

sort_rarity = {
	effect = {
		if = {
			limit = {
				var:sort_artifacts = flag:rarity
			}
			set_variable = {
				name = sort_artifacts
				value = flag:distance
			}
		}
		else = {
			set_variable = {
				name = sort_artifacts
				value = flag:rarity
			}
		}
	}
	is_shown = {
		exists = var:sort_artifacts
		var:sort_artifacts = flag:rarity
	}
}

filter_artifacts_all = {
	effect = {
		set_variable = {
			name = filter_artifacts
			value = flag:all
		}
	}
	is_shown = {
		exists = var:filter_artifacts
		var:filter_artifacts = flag:all
	}
}

filter_artifacts_helmet = {
	effect = {
		set_variable = {
			name = filter_artifacts
			value = flag:helmet
		}
	}
	is_shown = {
		exists = var:filter_artifacts
		var:filter_artifacts = flag:helmet
	}
}

filter_artifacts_primary_armament = {
	effect = {
		set_variable = {
			name = filter_artifacts
			value = flag:primary_armament
		}
	}
	is_shown = {
		exists = var:filter_artifacts
		var:filter_artifacts = flag:primary_armament
	}
}

filter_artifacts_armor = {
	effect = {
		set_variable = {
			name = filter_artifacts
			value = flag:armor
		}
	}
	is_shown = {
		exists = var:filter_artifacts
		var:filter_artifacts = flag:armor
	}
}

filter_artifacts_regalia = {
	effect = {
		set_variable = {
			name = filter_artifacts
			value = flag:regalia
		}
	}
	is_shown = {
		exists = var:filter_artifacts
		var:filter_artifacts = flag:regalia
	}
}

filter_artifacts_miscellaneous = {
	effect = {
		set_variable = {
			name = filter_artifacts
			value = flag:miscellaneous
		}
	}
	is_shown = {
		exists = var:filter_artifacts
		var:filter_artifacts = flag:miscellaneous
	}
}