adjacent_counties = {

	saved_scopes = {
		target
	}
	effect = {
		if = {
			limit = {
				# NOT = { has_variable_list = adjacent_counties }
				always = yes
			}
			scope:target = {
				save_scope_as = origin
			}
			clear_variable_list = adjacent_counties
			clear_variable_list = adjacent_counties_across_water

			ordered_neighboring_county = {
				order_by = title_province.direction_svalue
				min = 0
				root = {
					add_to_variable_list = {
						name = adjacent_counties
						target = prev
					}
				}
				set_variable = {
					name = direction
					value = title_province.direction_svalue
				}
			}
			ordered_title_to_title_neighboring_and_across_water_county = {
				order_by = title_province.direction_svalue
				limit = {
					NOT = {
						root = {
							is_target_in_variable_list = {
								name = adjacent_counties
								target = prev
							}
						}
					}
				}
				min = 0
				root = {
					add_to_variable_list = {
						name = adjacent_counties_across_water
						target = prev
					}
				}
				set_variable = {
					name = direction
					value = title_province.direction_svalue
				}
			}
		}
	}
	is_shown = {
		NOT = {
			has_variable_list = adjacent_counties
		}
	}
}

error_suppression_ocr = {
	is_shown = {
		exists = var:realm_holdings
		exists = var:total_tax
		exists = var:total_levies
		exists = var:vassal_counties
		exists = var:neighbours
		exists = var:war_targets
	}
	effect = {
		set_variable = neighbours
		set_variable = adjacent_across_water_hostile_forts
		set_variable = war_targets
		set_variable = tutorial_chance_map_mode_complete_1

		set_variable = realm_holdings
		set_variable = total_tax
		set_variable = total_levies
		set_variable = vassal_counties
	}
}

# adjacent_rulers = {
# 	effect = {
# 		clear_variable_list = adjacent_rulers
# 		clear_variable_list = adjacent_rulers_across_water
# 		clear_variable_list = adjacent_vassals
#
# 		capital_province = {
# 			save_scope_as = origin
# 		}
#
# 		every_neighboring_top_liege_realm_owner = {
# 			add_to_list = adjacent_rulers
# 			set_variable = {
# 				name = direction
# 				value = capital_province.direction_svalue
# 			}
# 		}
# 		every_neighboring_and_across_water_top_liege_realm_owner = {
# 			limit = {
# 				NOT = {
# 					is_in_list = adjacent_rulers
# 				}
# 			}
# 			add_to_list = adjacent_rulers_across_water
# 			set_variable = {
# 				name = direction
# 				value = capital_province.direction_svalue
# 			}
# 		}
#
# 		if = {
# 			limit = {
# 				exists = liege
# 			}
# 			every_character_to_title_neighboring_county = {
# 				holder = {
# 					if = {
# 						limit = {
# 							exists = liege
# 							liege = root.liege
# 						}
# 						add_to_list = adjacent_vassals
# 					}
# 					if = {
# 						limit = {
# 							exists = liege
# 							top_liege = root.top_liege
# 						}
# 						every_liege_or_above = {
# 							limit = {
# 								exists = liege
# 								liege = root.liege
# 							}
# 							add_to_list = adjacent_vassals
# 						}
# 					}
# 					set_variable = {
# 						name = direction
# 						value = capital_province.direction_svalue
# 					}
# 				}
# 			}
# 		}
#
# 		ordered_in_list = {
# 			list = adjacent_rulers
# 			order_by = var:direction
# 			min = 0
#
# 			root = {
# 				add_to_variable_list = {
# 					name = adjacent_rulers
# 					target = prev
# 				}
# 			}
# 		}
# 		ordered_in_list = {
# 			list = adjacent_rulers_across_water
# 			order_by = var:direction
# 			min = 0
#
# 			root = {
# 				add_to_variable_list = {
# 					name = adjacent_rulers_across_water
# 					target = prev
# 				}
# 			}
# 		}
# 		ordered_in_list = {
# 			list = adjacent_vassals
# 			order_by = var:direction
# 			min = 0
#
# 			root = {
# 				add_to_variable_list = {
# 					name = adjacent_vassals
# 					target = prev
# 				}
# 			}
# 		}
# 	}
# }

is_coastal_or_river = {
	is_shown = {
		tier = 2
		is_coastal_county = yes
	}
}

is_coastal_county = {
	is_shown = {
		tier = 2
		is_coastal_county = yes
		is_riverside_county = no
	}
}

is_riverside_county = {
	is_shown = {
		tier = 2
		is_riverside_county = yes
		is_coastal_county = no
	}
}

is_river_and_coastal = {
	is_shown = {
		tier = 2
		is_riverside_county = yes
		is_coastal_county = yes
	}
}

county_controller = {
	effect = {
		# set_variable = {
		# 	name = controller
		# 	value = this.county_controller
		# }
	}
}

is_he_at_war = {
	saved_scopes = { me }

	is_shown = {
		county_controller = {
			OR = {
				is_at_war_with = scope:me
				AND = {
					any_liege_or_above = {
						is_at_war_with = scope:me
					}
					NOT = {
						any_liege_or_above = {
							this = scope:me
						}
					}
					NOT = {
						this = scope:me
					}
				}
				AND = {
					any_liege_or_above = {
						is_at_war_with = scope:me
						is_vassal_or_below_of = scope:me
					}
					NOT = {
						this = scope:me
					}
				}
			}
			# is_at_war = yes
		}
	}
}