types CharacterInteraction
{
	type icon_character_interaction = icon {
		name = "interaction_icon"
		position = { 0 -5 }
		size = { 60 60 }
		texture = "[CharacterInteractionConfirmationWindow.GetInteraction.GetIcon]"
	}

	type vbox_sender_portrait_message = vbox {
		margin = { 10 5 }
		# using = Background_Letter
		datacontext = "[CharacterInteractionNotificationWindow.GetSender]"

		hbox = {
			layoutpolicy_horizontal = expanding
			spacing = 15

			### TEXT ###
			vbox = {
				layoutpolicy_horizontal = expanding

				char_name = {
					blockoverride "pre" {
						text_single = {
							margin_right = 3
							raw_text = "From"
						}
					}
					layoutpolicy_horizontal = expanding
					datacontext = "[CharacterInteractionNotificationWindow.GetSender]"
				}

				text_multi = {
					layoutpolicy_horizontal = expanding
					name = "description"
					max_width = 650
					autoresize = yes
					text = "[CharacterInteractionNotificationWindow.GetNotificationText]"
				}

				hbox = {
					name = "signature"
					layoutpolicy_horizontal = expanding
					visible = no

					vbox = {
						layoutpolicy_horizontal = expanding

						text_single = {
							name = "signed_text"
							layoutpolicy_horizontal = expanding
							text = "[CharacterInteractionNotificationWindow.GetSigned]"
							using = Font_Type_Flavor
							default_format = "#light_background"
						}

						button_text = {
							layoutpolicy_horizontal = expanding
							datacontext = "[CharacterInteractionNotificationWindow.GetSender]"
							using = char_click
						    blockoverride "text" {
								text = "[CharacterInteractionNotificationWindow.GetSignature]"
						    }
							blockoverride "dot" {
							}
						}
					}
				}
			}

		}
	}

	type vbox_arrangement_interaction_send_offer = vbox {
		name = "send_offer_window"
		margin = { 0 10 }

		vbox = {
			layoutpolicy_horizontal = expanding
			using = ocr
			hbox_character_interaction_acceptance = {
				layoutpolicy_horizontal = expanding
			}

			button_primary_text = {
				layoutpolicy_horizontal = expanding
				blockoverride "disabled" {
					visible = "[Not(CharacterInteractionConfirmationWindow.CanSend)]"
				}
				blockoverride "text" {
					block "button_content" { }
				}
				onclick = "[MatchmakerInteractionWindow.Send]"
				enabled = "[CharacterInteractionConfirmationWindow.CanSend]"
				tooltip = "[CharacterInteractionConfirmationWindow.GetCanSendDescription]"
				clicksound = "event:/SFX/UI/Generic/sfx_ui_generic_confirm"
			}

			widget = {
				size = { 0 5 }
			}

			vbox_interaction_options = {
				layoutpolicy_horizontal = expanding
			}

			text_multi_on_decline_summary = { }
		}

		vbox_arrangement_interaction_send_offer_old = {
			using = vanilla
		}
	}

	type vbox_marriage_interaction_marriage_details = vbox {
		margin = { 15 15 }

		background = {
			using = Background_Area
		}

		hbox = {
			layoutpolicy_horizontal = expanding

			icon = {
				name = "marriage_type"
				block "icon_frame"
				{
					visible = "[MatchmakerInteractionWindow.HasPickedCharacters]"
				}

				texture = "gfx/interface/icons/marriage_types.dds"
				framesize = { 60 60 }
				size = { 0 0 }
				frame = "[MarriageInfo.GetMarriageIconFrame]"
			}

			vbox = {
				layoutpolicy_horizontal = expanding

				text_multi = {
					name = "children_house_info"
					visible = "[And( StringIsEmpty( MarriageInfo.GetMatrilinealDesc ), Not( MatchOffer.IsSameSex ) )]"
					layoutpolicy_horizontal = expanding
					max_width = 600
					autoresize = yes
					text = "MARRIAGE_CHILDREN_HOUSE_INFO"
				}

				text_multi = {
					name = "children_chance_info"
					layoutpolicy_horizontal = expanding
					max_width = 600
					autoresize = yes
					text = "MARRIAGE_CHILDREN_CHANCE_INFO"
					tooltip = "[MatchOffer.GetChanceOfChildrenTooltip]"
				}

				text_multi = {
					name = "inbreeding_risk"
					visible = "[MatchOffer.HasInbreedingRisk]"
					max_width = 600
					min_width = 600
					autoresize = yes
					text = "MATCH_OFFER_INBREEDING_WARNING"
				}
			}
		}

		### Traits
		vbox = {
			layoutpolicy_horizontal = expanding
			margin = { 5 10 }
			# spacing = 5
			visible = "[Not( MatchOffer.IsSameSex )]"

			hbox = {
				layoutpolicy_horizontal = expanding

				text_single = {
					layoutpolicy_horizontal = expanding
					name = "traits_header"
					visible = "[MatchOffer.HasInheritableTraits]"
					raw_text = "[Localize('INHERITABLE_TRAITS')]."
				}

				expand = { }
			}

			text_single = {
				name = "no_traits"
				layoutpolicy_horizontal = expanding
				visible = "[Not(MatchOffer.HasInheritableTraits)]"
				text = "NO_INHERITABLE_TRAITS"
			}

			hbox = {
				layoutpolicy_horizontal = expanding

				hbox = {
					name = "traits"
					datamodel = "[MatchOffer.GetInheritableTraitItems]"
					visible = "[Not(IsDataModelEmpty(MatchOffer.GetInheritableTraitItems))]"

					item = {
						text_single = {
							datacontext = "[MatchmakerTraitInfo.GetTrait]"
							datacontext = "[MatchmakerTraitInfo.GetCharacter]"
							raw_text = "[Trait.GetName(Character.Self)]. "
						}
					}
				}

				expand = { }
			}
		}

		divider_light = {
			layoutpolicy_horizontal = expanding
		}

		vbox = {
			visible = "[MarriageInfo.HasAlliances]"
			layoutpolicy_horizontal = expanding
			margin = { 0 15 }

			text_single = {
				layoutpolicy_horizontal = expanding
				name = alliances_label
				raw_text = "[alliances|E]."
			}

			vbox = {
				name = "alliance_grid"
				datamodel = "[MarriageInfo.GetAllianceItems]"
				layoutpolicy_horizontal = expanding

				item = {
					vbox = {
						layoutpolicy_horizontal = expanding

						char_name = {
							layoutpolicy_horizontal = expanding
							datacontext = "[AllianceInfo.GetCharacter]"
							blockoverride "pre" {
								text_single = {
									raw_text = "Alliance with"
								}
							}
						}

						hbox = {
						    layoutpolicy_horizontal = expanding
							datacontext = "[AllianceInfo.GetMilitaryInfo]"
							spacing = 3

							text_single = {
								raw_text = "STRENGTH_COMPARISON_TOTAL_STRENGTH"
							}

							text_single = {
								raw_text = "soldiers,"
							}

							text_single = {
								raw_text = "[GuiMilitaryStrength.GetRatioName]."
							}

							tooltip = "[GuiMilitaryStrength.GetRatioDescription]"

						    expand = { }
						}

						expand = { }
					}
				}
			}
		}

		text_single = {
			layoutpolicy_horizontal = expanding
			visible = "[Not(MarriageInfo.HasAlliances)]"

			text = "MATCH_OFFER_NO_ALLIANCES"
		}

		block "marriage_details_after"
		{

		}

		expand = { }
	}

	type vbox_concubine_interaction_details = vbox {
		margin = { 15 15 }

		background = {
			using = Background_Area
		}

		text_multi = {
			name = "children_house_info"
			layoutpolicy_horizontal = expanding
			max_width = 600
			autoresize = yes
			raw_text = "[MatchOffer.GetChanceOfChildrenDesc]."
			tooltip = "[MatchOffer.GetChanceOfChildrenTooltip]"
		}

		text_multi = {
			name = "children_chance_info"
			visible = "[Not( MatchOffer.IsSameSex )]"
			layoutpolicy_horizontal = expanding
			max_width = 600
			autoresize = yes
			raw_text = "[Localize('CONCUBINE_CHILDREN_HOUSE')]."
		}

		### Traits
		vbox = {
			layoutpolicy_horizontal = expanding

			visible = "[Not( MatchOffer.IsSameSex )]"

			text_single = {
				layoutpolicy_horizontal = expanding
				name = "traits_header"
				visible = "[MatchOffer.HasInheritableTraits]"
				raw_text = "[GetDataModelSize(MatchOffer.GetInheritableTraitItems)] [Localize('INHERITABLE_TRAITS')]"
			}

			text_single = {
				name = "no_traits"
				layoutpolicy_horizontal = expanding
				visible = "[Not(MatchOffer.HasInheritableTraits)]"
				text = "NO_INHERITABLE_TRAITS"
			}

			vbox = {
				layoutpolicy_horizontal = expanding
				name = "traits"
				datamodel = "[MatchOffer.GetInheritableTraitItems]"
				visible = "[Not(IsDataModelEmpty(MatchOffer.GetInheritableTraitItems))]"

				item = {
					hbox = {
				    layoutpolicy_horizontal = expanding
						spacing = 3
						datacontext = "[MatchmakerTraitInfo.GetTrait]"
						datacontext = "[MatchmakerTraitInfo.GetCharacter]"

						text_single = {
							raw_text = "[Trait.GetName(Character.Self)]."

							widget = {
								size = { 100% 100% }
								tooltipwidget = {
									using = character_trait_tooltip
									blockoverride "actual_description_text"
									{
										text = "TRAIT_ENTRY_INHERITANCE_INFO"
									}
								}
							}
						}

						hbox = {
							using = locr_hide
							spacing = 3
							text_single = {
								raw_text = "Guaranteed."
								visible = "[And( MatchmakerTraitInfo.IsGuaranteed, Not(MatchmakerTraitInfo.CanUpgrade) )]"
							}

							text_single = {
								raw_text = "Upgrade."
								visible = "[MatchmakerTraitInfo.CanUpgrade]"
							}
						}
				    expand = { }
					}
				}
			}
		}

		divider_light = {
			layoutpolicy_horizontal = expanding
		}

		expand = { }
	}

	type vbox_list_interaction_title_selection = vbox {
		name = "titles_grid"
		datamodel = "[CharacterInteractionConfirmationWindow.GetTitles]"
		layoutpolicy_horizontal = expanding
		spacing = 1

		item = {
			widget = {
				name = "title_list_item"
				layoutpolicy_horizontal = expanding
				size = { 0 22 }

				button = {
					# size = { 0 20 }
					name = "title_button"
					datacontext = "[InteractionTitleItem.GetTitle]"
					# size = "[InteractionTitleItem.GetSize]"
					onclick = "[InteractionTitleItem.OnClick]"
					# onrightclick = "[InteractionTitleItem.OnRightClick]"
					button_ignore = none
					down = "[InteractionTitleItem.IsSelected]"
					enabled = "[InteractionTitleItem.IsSelectable]"
					onrightclick = "[OpenGameViewData('holding_view', Title.GetProvince.Self)]"
					onrightclick = "[Set('hide_grant_titles', 'yes')]"
					onrightclick = "[Clear('county_tabs')]"

					using = tooltip_es
					# parentanchor = right

					block "button_toggles" {
						enabled = "[InteractionTitleItem.IsSelectable]"
					}

					hbox = {
						resizeparent = yes
						# margin_left = 45
						margin_left = 5
						margin_top = 1
						# margin_right = 5
						spacing = 3
						layoutpolicy_horizontal = expanding

						text_single = {
							raw_text = "Can't select"
							visible = "[Not(InteractionTitleItem.IsSelectable)]"
							tooltip = "[InteractionTitleItem.GetTooltip]"
						}

						text_single = {
							raw_text = "Selected"
							visible = "[InteractionTitleItem.IsSelected]"
						}

						text_single = {
							name = "text"
							# layoutpolicy_horizontal = expanding
							raw_text = "[InteractionTitleItem.GetTitle.GetNameNoTooltip],"
						}

						text_single = {
							# layoutpolicy_horizontal = expanding
							raw_text = "in [InteractionTitleItem.GetTitle.GetDeJureLiege.GetNameNoTierNoTooltip]."
						}

						text_single = {
							datacontext = "[InteractionTitleItem.GetTitle.GetProvince]"
							visible = "[Not(ObjectsEqual( Province.Self, MyCapital.Self))]"
							raw_text = "[DistanceTo(MyCapital, Province)|0] [DaysTo(MyCapital, Province)] [Direction(MyCapital, Province)]."
						}

						text_single = {
							raw_text = "Pressed claim."
							visible = "[GetPlayer.HasPressedClaimOnTitle( Title.Self )]"
							tooltip = "REVOKE_TITLE_PRESSED_CLAIM"
						}

						text_single = {
							raw_text = "Unpressed claim."
							visible = "[And(GetPlayer.HasClaimOnTitle( Title.Self ), Not(GetPlayer.HasPressedClaimOnTitle( Title.Self )))]"
							tooltip = "REVOKE_TITLE_UNPRESSED_CLAIM"
						}

						text_single = {
							raw_text = "Leased out."
							# tooltip = "REVOKE_TITLE_UNPRESSED_CLAIM"
							visible = "[Title.HasLeasedOutVassal]"
							tooltip = "GRANT_TITLE_LEASED_OUT_VASSAL"
						}

						block "extra_title_items" { }

						expand = { }
					}
				}
			}
		}
	}

	type vbox_list_interaction_artifact_selection = vbox {
		name = "artifacts_grid"
		datamodel = "[CharacterInteractionConfirmationWindow.GetArtifacts]"
		layoutpolicy_horizontal = expanding

		item = {
			button_text = {
				layoutpolicy_horizontal = expanding
				onclick = "[CharacterInteractionConfirmationWindow.SetSelectedArtifact( Artifact.Self )]"
				onclick = "[GetVariableSystem.Toggle( 'character_interaction_change_artifact' )]"
				blockoverride "pre" {
					text_single = {
						visible = "[ObjectsEqual( CharacterInteractionConfirmationWindow.GetSelectedArtifact, Artifact.Self )]"
						raw_text = "Selected,"
					}
				}
			    blockoverride "text" {
			        raw_text = "[Artifact.GetNameNoTooltip]."
			    }
				blockoverride "extra" {
					spacing = 3
					text_single = {
						visible = "[GetPlayer.GetInventory.IsEquipped( Artifact.Self )]"
						raw_text = "[Select_CString( Artifact.IsCourtArtifact, 'Displayed', 'Equipped' )]."
					}
				}
				tooltipwidget = {
					artifact_tooltip = { }
				}
			}
		}
	}

	type vbox_character_interaction_three_characters = vbox {
		margin = { 10 10 }

		background = {
			texture = "gfx/interface/illustrations/event_scenes/study.dds"
			alpha = 0.1
			fittype = centercrop
			using = Mask_Rough_Edges
		}

		button_text = {
			layoutpolicy_horizontal = expanding
		    blockoverride "text" {
		        raw_text = "Participants, click to hide."
		    }
			onclick = "[GetVariableSystem.Toggle('hide_x_participants')]"
			visible = "[GetVariableSystem.Exists('hide_x_participants')]"
		}

		button_text = {
			layoutpolicy_horizontal = expanding
		    blockoverride "text" {
		        raw_text = "Show participants."
		    }
			visible = "[Not(GetVariableSystem.Exists('hide_x_participants'))]"
			onclick = "[GetVariableSystem.Toggle('hide_x_participants')]"
		}

		vbox = {
			visible = "[GetVariableSystem.Exists('hide_x_participants')]"
			layoutpolicy_horizontal = expanding

			char_name = {
				layoutpolicy_horizontal = expanding
				blockoverride "pre" {
					spacing = 3
					text_single = {
						raw_text = "Sender: "
					}
				}
				datacontext = "[CharacterInteractionConfirmationWindow.GetActor]"
				visible = "[Character.IsValid]"

			}

			vbox = {
				visible = "[CharacterInteractionConfirmationWindow.ShouldPickSecondaryActor]"
				layoutpolicy_horizontal = expanding

				char_name = {
					layoutpolicy_horizontal = expanding
					datacontext = "[CharacterInteractionConfirmationWindow.GetSecondaryActor]"
					visible = "[CharacterInteractionConfirmationWindow.GetSecondaryActor.IsValid]"
				}
			}

			### Right
			vbox = {
				visible = "[CharacterInteractionConfirmationWindow.ShouldShowSecondaryRecipient]"
				layoutpolicy_horizontal = expanding

				char_name = {
					layoutpolicy_horizontal = expanding
					blockoverride "pre" {
						spacing = 3
						text_single = {
							raw_text = "Selected: "
						}
					}
					datacontext = "[CharacterInteractionConfirmationWindow.GetSecondaryRecipient]"
					visible = "[CharacterInteractionConfirmationWindow.GetSecondaryRecipient.IsValid]"
				}
			}

			char_name = {
				layoutpolicy_horizontal = expanding
				datacontext = "[CharacterInteractionConfirmationWindow.GetRecipient]"
				blockoverride "pre" {
					spacing = 3
					text_single = {
						raw_text = "Recepient:"
					}
				}

				visible = "[And( Character.IsValid, Not( ObjectsEqual( CharacterInteractionConfirmationWindow.GetActor, CharacterInteractionConfirmationWindow.GetRecipient ) ) )]"
			}
		}

		vbox = {
			# visible = "[GetVariableSystem.Exists('hide_x_participants')]"
			layoutpolicy_horizontal = expanding
			allow_outside = yes

			# text_single = {
			# 	layoutpolicy_horizontal = expanding
			# 	visible = "[CharacterInteractionConfirmationWindow.ShouldPickSecondaryActor]"
			# 	text = "[CharacterInteractionConfirmationWindow.GetActorSecondaryLabel]"
			# 	min_width = 100
			# 	allow_outside = yes
			#
			# }

			change_revert_buttons = {
				layoutpolicy_horizontal = expanding
				visible = "[CharacterInteractionConfirmationWindow.ShouldPickSecondaryActor]"

				blockoverride "ReplaceClick"
				{
					onclick = "[CharacterInteractionConfirmationWindow.OnChangeOrRevertActorCharacter]"
				}
				blockoverride "ReplaceVisible"
				{
					visible = "[CharacterInteractionConfirmationWindow.CanChangeActorCharacter]"
				}
				blockoverride "RevertClick"
				{
					onclick = "[CharacterInteractionConfirmationWindow.OnChangeOrRevertActorCharacter]"
				}
				blockoverride "RevertVisible"
				{
					visible = "[CharacterInteractionConfirmationWindow.CanRevertActorCharacter]"
				}
			}

			# text_single = {
			# 	layoutpolicy_horizontal = expanding
			# 	visible = "[CharacterInteractionConfirmationWindow.ShouldShowSecondaryRecipient]"
			# 	text = "[CharacterInteractionConfirmationWindow.GetRecipientSecondaryLabel]"
			# 	min_width = 100
			#
			# }

			change_revert_buttons = {
				layoutpolicy_horizontal = expanding
				visible = "[CharacterInteractionConfirmationWindow.ShouldShowSecondaryRecipient]"

				blockoverride "ReplaceClick"
				{
					onclick = [CharacterInteractionConfirmationWindow.OnChangeOrRevertRecipientCharacter]
				}
				blockoverride "ReplaceVisible"
				{
					visible = [CharacterInteractionConfirmationWindow.CanChangeRecipientCharacter]
				}
				blockoverride "RevertClick"
				{
					onclick = [CharacterInteractionConfirmationWindow.OnChangeOrRevertRecipientCharacter]
				}
				blockoverride "RevertVisible"
				{
					visible = [CharacterInteractionConfirmationWindow.CanRevertRecipientCharacter]
				}
			}

			# text_single = {
			# 	visible = "[Not( ObjectsEqual( CharacterInteractionConfirmationWindow.GetActor, CharacterInteractionConfirmationWindow.GetRecipient ) )]"
			# 	text = "INTERACTION_RECIPIENT"
			# 	min_width = 100
			# 	layoutpolicy_horizontal = expanding
			# }

		}
	}

	type widget_character_interaction_four_characters = container {
		layoutpolicy_horizontal = expanding
		ignoreinvisible = yes
		# size = { 0 90 }

		block "bg_illustration_datacontext" { }

		# Temp background
		background = {
			alpha = 0.1
			fittype = centercrop

			using = Mask_Rough_Edges

			block "bg_illustration"
			{
				texture = "gfx/interface/illustrations/event_scenes/sittingroom.dds"
			}
		}

		flowcontainer = {
			using = ocr
			direction = vertical
			position = { 10 0 }
			margin_bottom = 5
			ignoreinvisible = yes

			button_text = {
				blockoverride "text" {
					raw_text = "Participants, click to hide."
				}
				onclick = "[GetVariableSystem.Toggle('hide_x_participants')]"
				visible = "[GetVariableSystem.Exists('hide_x_participants')]"
			}

			button_text = {
				blockoverride "text" {
					raw_text = "Show participants."
				}
				onclick = "[GetVariableSystem.Toggle('hide_x_participants')]"
				visible = "[Not(GetVariableSystem.Exists('hide_x_participants'))]"
			}

			flowcontainer = {
			    ignoreinvisible = yes
				direction = vertical
				visible = "[GetVariableSystem.Exists('hide_x_participants')]"


				flowcontainer = {
					spacing = 0

					block "left_small_portrait"
					{
						datacontext = "[CharacterInteractionConfirmationWindow.GetActor]"
						visible = "[Character.IsValid]"
					}

					char_name = {
						blockoverride "pre" {
							spacing = 3
							text_single = {
								raw_text = "[Localize('INTERACTION_SENDER')],"
							}
						}
						blockoverride "relation" {}
						blockoverride "align" {
							align = left
						}
					}

				}

				flowcontainer = {
					spacing = 0

					char_name = {
						blockoverride "pre" {
							spacing = 3
							text_single = {
								block "left_character_label"
								{
									raw_text = "[CharacterInteractionConfirmationWindow.GetActorSecondaryLabel],"
								}
							}
						}
						blockoverride "extra" {
							text_single = {
								raw_text = "[Character.GetAge]."
							}
						}
						blockoverride "relation" {}
						blockoverride "align" {
							align = left
						}
						block "left_portrait"
						{
							datacontext = "[CharacterInteractionConfirmationWindow.GetSecondaryActor]"
						}
					}

					button_text = {
						name = "tutorial_highlight_change_left_character"
						# alwaystransparent = no
						# tooltip = "CHANGE_CHARACTER"
						blockoverride "text" {
							align = left
							raw_text = "CHANGE_CHARACTER"
						}

						blockoverride "extra" {
							dot = { }
						}


						block "button_left_change"
						{
							visible = "[CharacterInteractionConfirmationWindow.CanChangeActorCharacter]"
							onclick = "[CharacterInteractionConfirmationWindow.OnChangeOrRevertActorCharacter]"
						}
					}

					button_text = {
						name = "revert_left_character"
						# alwaystransparent = no
						# tooltip = "CANCEL"
						blockoverride "text" {
							align = left
							raw_text = "CANCEL"
						}

						blockoverride "extra" {
							dot = { }
						}
						# using = tooltip_below

						# using = Animation_ShowHide_Quick


						block "button_left_revert"
						{
							visible = "[CharacterInteractionConfirmationWindow.CanRevertActorCharacter]"
							onclick = "[CharacterInteractionConfirmationWindow.OnChangeOrRevertActorCharacter]"
						}
					}
				}

				flowcontainer = {
					spacing = 0
					visible = "[CharacterInteractionConfirmationWindow.GetSecondaryRecipient.IsValid]"

					char_name = {
						blockoverride "pre" {
							spacing = 3
							text_single = {
								block "right_character_label"
								{
									raw_text = "[Localize('INTERACTION_RECIPIENT')],"
								}
							}
						}
						blockoverride "align" {
							align = left
						}
						block "right_main_portrait"
						{
							datacontext = "[CharacterInteractionConfirmationWindow.GetSecondaryRecipient]"
						}
					}

					button_text = {
						name = "tutorial_highlight_change_left_character"
						# alwaystransparent = no
						# tooltip = "CHANGE_CHARACTER"
						blockoverride "text" {
							align = left
							raw_text = "CHANGE_CHARACTER"
						}
						blockoverride "relation" {}

						blockoverride "extra" {
							dot = { }
						}


						block "button_right_change"
						{
							visible = "[CharacterInteractionConfirmationWindow.CanChangeRecipientCharacter]"
							onclick = "[CharacterInteractionConfirmationWindow.OnChangeOrRevertRecipientCharacter]"
						}
					}

					button_text = {
						name = "revert_right_character"

						blockoverride "text" {
							align = left
							raw_text = "CANCEL"
						}

						blockoverride "extra" {
							dot = { }
						}

						block "button_right_revert"
						{
							visible = "[CharacterInteractionConfirmationWindow.CanRevertActorCharacter]"
							onclick = "[CharacterInteractionConfirmationWindow.OnChangeOrRevertActorCharacter]"
						}
					}
				}

				flowcontainer = {
					spacing = 0

					block "right_small_portrait"
					{
						datacontext = "[CharacterInteractionConfirmationWindow.GetRecipient]"
						visible = "[Character.IsValid]"
					}

					char_name = {
						blockoverride "pre" {
							spacing = 3
							text_single = {
								raw_text = "[Localize('INTERACTION_RECIPIENT')],"
							}
						}
						blockoverride "relation" {}
						blockoverride "extra" {
							text_single = {
								raw_text = "[Character.GetAge]."
							}
						}
						blockoverride "align" {
							align = left
						}
					}

				}

			}
			button_text = {
				block "button_clear" {
					visible = "[CharacterInteractionConfirmationWindow.CanChangeActorCharacter]"
					enabled = "[CharacterInteractionConfirmationWindow.CanClear]"
					onclick = "[CharacterInteractionConfirmationWindow.OnClear]"
					shortcut = "go_back"
				}
				blockoverride "text" {
					raw_text = "CLEAR_MARRIED_CHARACTER"
				}
				blockoverride "extra" {
					dot = { align = left }
				}
			}

			block "interaction_extra" {}
		}

		# widget_character_interaction_four_characters_old = {
		# 	using = vanilla
		# }
	}

	type vbox_character_interaction_effects_contents = vbox {
		name = "affected_characters_accept"
		layoutpolicy_horizontal = expanding
		spacing = 5

		# Duplicate recipient if it's player - player info should go first
		vbox_character_interaction_effects_me = {
			datacontext = "[InteractionEffectsDescription.GetRecipient]"
			visible = "[And( Character.IsLocalPlayer, DisplayedInteractionEffects.HasRecipientEffects )]"
			layoutpolicy_horizontal = expanding

			blockoverride "EffectFromIntermediaryText" {
				text = "[DisplayedInteractionEffects.GetEffectFromIntermediary.GetRecipientEffect]"
			}

			blockoverride "EffectText" {
				text = "[DisplayedInteractionEffects.GetMainEffect.GetRecipientEffect]"
			}
		}

		# Duplicate intermediary if it's player - player info should go first
		vbox_character_interaction_effects_me = {
			datacontext = "[InteractionEffectsDescription.GetIntermediary]"
			visible = "[And( Character.IsLocalPlayer, DisplayedInteractionEffects.HasIntermediaryEffects )]"
			layoutpolicy_horizontal = expanding

			blockoverride "EffectFromIntermediaryText" {
				text = "[DisplayedInteractionEffects.GetEffectFromIntermediary.GetIntermediaryEffect]"
			}

			blockoverride "EffectText" {
				text = "[DisplayedInteractionEffects.GetMainEffect.GetIntermediaryEffect]"
			}
		}

		### Actor
		vbox_character_interaction_effects_me = {
			datacontext = "[InteractionEffectsDescription.GetActor]"
			visible = "[DisplayedInteractionEffects.HasActorEffects]"
			layoutpolicy_horizontal = expanding

			blockoverride "EffectFromIntermediaryText" {
				text = "[DisplayedInteractionEffects.GetEffectFromIntermediary.GetActorEffect]"
			}

			blockoverride "EffectText" {
				text = "[DisplayedInteractionEffects.GetMainEffect.GetActorEffect]"
			}
		}

		### Intermediary
		vbox_character_interaction_effects_other = {
			datacontext = "[InteractionEffectsDescription.GetIntermediary]"
			visible = "[And( Not( Character.IsLocalPlayer ), DisplayedInteractionEffects.HasIntermediaryEffects )]"
			layoutpolicy_horizontal = expanding

			blockoverride "EffectFromIntermediaryText" {
				text = "[DisplayedInteractionEffects.GetEffectFromIntermediary.GetIntermediaryEffect]"
			}

			blockoverride "EffectText" {
				text = "[DisplayedInteractionEffects.GetMainEffect.GetIntermediaryEffect]"
			}
		}

		### Recipient
		vbox_character_interaction_effects_other = {
			datacontext = "[InteractionEffectsDescription.GetRecipient]"
			visible = "[And( Not( Character.IsLocalPlayer ), DisplayedInteractionEffects.HasRecipientEffects )]"
			layoutpolicy_horizontal = expanding

			blockoverride "EffectFromIntermediaryText" {
				text = "[DisplayedInteractionEffects.GetEffectFromIntermediary.GetRecipientEffect]"
			}

			blockoverride "EffectText" {
				text = "[DisplayedInteractionEffects.GetMainEffect.GetRecipientEffect]"
			}
		}

		### Others
		vbox_character_interaction_other_effects = {
			datamodel = "[DisplayedInteractionEffects.GetEffectFromIntermediary.GetOtherEffects]"
			layoutpolicy_horizontal = expanding
		}

		### Others
		vbox_character_interaction_other_effects = {
			datamodel = "[DisplayedInteractionEffects.GetMainEffect.GetOtherEffects]"
			layoutpolicy_horizontal = expanding
		}
	}

	# All the interaction effects on you and on other character
	type vbox_character_interaction_effects = vbox {
		name = "effects"
		# spacing = 10

		text_single = {
			layoutpolicy_horizontal = expanding
			raw_text = "Will happen:"
			margin_left = 10
		}

		vbox = {
			visible = "[And(InteractionEffectsDescription.IsMaybeAnswer,InteractionEffectsDescription.HasRejectionEffect)]"
			layoutpolicy_horizontal = expanding

			button_text = {
				name = "show_accept_effects"
				layoutpolicy_horizontal = expanding
				blockoverride "text" {
					text = "INTERACTION_SHOW_ACCEPT_EFFECTS"
				}
				blockoverride "extra" {
					text_single = {
						raw_text = ", tab 1"
						align = left
					}
					text_single = {
						raw_text = ", Selected"
						align = left
						visible = "[InteractionEffectsDescription.IsShowingOnAcceptEffects]"
					}
					dot = { }
				}
				onclick = "[InteractionEffectsDescription.ShowOnAcceptEffect]"
				down = "[InteractionEffectsDescription.IsShowingOnAcceptEffects]"
				using = tooltip_ne
				shortcut = speed_1
			}

			button_text = {
				visible = "[InteractionEffectsDescription.IsIntermediaryVisible]"
				layoutpolicy_horizontal = expanding
				blockoverride "text" {
					text = "INTERACTION_SHOW_INTERMEDIARY_DECLINE_EFFECTS"
				}
				blockoverride "extra" {
					text_single = {
						raw_text = ", tab 2"
						align = left
					}
					text_single = {
						raw_text = ", Selected"
						align = left
						visible = "[InteractionEffectsDescription.IsShowingIntermediaryDeclineEffect]"
					}
					dot = { }
				}
				onclick = "[InteractionEffectsDescription.ShowIntermediaryDeclineEffect]"
				down = "[Not(InteractionEffectsDescription.IsShowingIntermediaryDeclineEffect)]"
				using = tooltip_ne
				shortcut = speed_2
			}

			button_text = {
				name = "show_decline_effects"
				layoutpolicy_horizontal = expanding
				blockoverride "text" {
					text = "INTERACTION_SHOW_DECLINE_EFFECTS"
				}
				blockoverride "extra" {
					text_single = {
						raw_text = ", tab 3"
						align = left
					}
					text_single = {
						raw_text = ", Selected"
						align = left
						visible = "[InteractionEffectsDescription.IsShowingRecipientDeclineEffect]"
					}
					dot = { }
				}
				onclick = "[InteractionEffectsDescription.ShowRecipientDeclineEffect]"
				down = "[Not(InteractionEffectsDescription.IsShowingRecipientDeclineEffect)]"
				using = tooltip_ne
				shortcut = speed_3
			}
		}

		scrollbox = {
			name = "effects_scrollarea"
			autoresizescrollarea = yes
			datacontext = "[InteractionEffectsDescription.GetDisplayedEffects]"
			visible = "[DisplayedInteractionEffects.HasAnyEffects]"
			scissor = yes
			layoutpolicy_horizontal = expanding
			layoutpolicy_vertical = expanding

			blockoverride "scrollbox_content"
			{
				set_parent_size_to_minimum = yes

				block "minimumsize" {
					minimumsize = { 640 0 }
				}

				vbox_character_interaction_effects_contents = {}
			}
		}
	}

	# All the interaction effects on you and on other character, simpler version without portraits
	type vbox_character_interaction_effects_simple = vbox {
		name = "effects"
		# spacing = 10

		vbox = {
			visible = "[And(InteractionEffectsDescription.IsMaybeAnswer,InteractionEffectsDescription.HasRejectionEffect)]"
			layoutpolicy_horizontal = expanding

			button_text = {
				layoutpolicy_horizontal = expanding
				blockoverride "pre" {
					text_single = {
						raw_text = "Showing"
						visible = "[InteractionEffectsDescription.IsShowingOnAcceptEffects]"
					}
					text_single = {
						raw_text = "Show"
						visible = "[Not(InteractionEffectsDescription.IsShowingOnAcceptEffects)]"
					}
					space = { }
				}
			    blockoverride "text" {
					text = "INTERACTION_SHOW_ACCEPT_EFFECTS"
					align = left
			    }
				blockoverride "dot" {

				}
				onclick = "[InteractionEffectsDescription.ShowOnAcceptEffect]"
			}

			button_text = {
				layoutpolicy_horizontal = expanding
				blockoverride "pre" {
					text_single = {
						raw_text = "Showing"
						visible = "[InteractionEffectsDescription.IsShowingIntermediaryDeclineEffect]"
					}
					text_single = {
						raw_text = "Show"
						visible = "[Not(InteractionEffectsDescription.IsShowingIntermediaryDeclineEffect)]"
					}
					space = { }
				}
			    blockoverride "text" {
					text = "INTERACTION_SHOW_INTERMEDIARY_DECLINE_EFFECTS"
			    }
				blockoverride "dot" {

				}
				onclick = "[InteractionEffectsDescription.ShowIntermediaryDeclineEffect]"
			}

			button_text = {
				layoutpolicy_horizontal = expanding
				blockoverride "pre" {
					text_single = {
						raw_text = "Showing"
						visible = "[Not(InteractionEffectsDescription.IsShowingRecipientDeclineEffect)]"
					}
					text_single = {
						raw_text = "Show"
						visible = "[InteractionEffectsDescription.IsShowingRecipientDeclineEffect]"
					}
					space = { }
				}
			    blockoverride "text" {
					text = "INTERACTION_SHOW_DECLINE_EFFECTS"
					align = left
			    }
				blockoverride "dot" {

				}
				onclick = "[InteractionEffectsDescription.ShowRecipientDeclineEffect]"
			}
		}

		scrollbox = {
			name = "effects_scrollarea"
			layoutpolicy_horizontal = expanding
			layoutpolicy_vertical = expanding
			block "scrollarea_size" {
				size = { 0 170 }
			}

			blockoverride "scrollbox_content"
			{
				text_multi = {
					visible = "[InteractionEffectsDescription.IsShowingOnAcceptEffects]"
					name = "accept_effects_info"
					layoutpolicy_horizontal = expanding
					autoresize = yes
					block "width" {
						max_width = 450
					}
					text = "[InteractionEffectsDescription.GetAcceptEffectDescription]"
				}

				text_multi = {
					visible = "[Not(InteractionEffectsDescription.IsShowingIntermediaryDeclineEffect)]"
					layoutpolicy_horizontal = expanding
					autoresize = yes
					block "width" {
						max_width = 450
					}
					text = "[InteractionEffectsDescription.GetIntermediaryRejectionEffectDescription]"
				}

				text_multi = {
					visible = "[Not(InteractionEffectsDescription.IsShowingRecipientDeclineEffect)]"
					layoutpolicy_horizontal = expanding
					autoresize = yes
					block "width" {
						max_width = 450
					}
					text = "[InteractionEffectsDescription.GetRejectionEffectDescription]"
				}
				block "extra_content" { }
			}
		}
	}

	# Interaction effects on me
	type vbox_character_interaction_effects_me = vbox {
		name = "me"

		background = {
			using = Background_Area_With_Header
		}

		flowcontainer = {
			layoutpolicy_horizontal = expanding

			text_single = {
				text = "EFFECTS_ON_ME"
				layoutpolicy_horizontal = expanding
			}
			text_single = {
				raw_text = ":"
			}
		}

		hbox = {
			layoutpolicy_horizontal = expanding

			text_multi = {
				name = "intermediary_effects_info"
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				autoresize = yes
				max_width = 450
				block "EffectFromIntermediaryText" {
					text = ""
				}
			}

			expand = { }
		}


		hbox = {
			layoutpolicy_horizontal = expanding

			text_multi = {
				name = "effects_info"
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				autoresize = yes
				max_width = 450
				block "EffectText" { }
			}

			expand = { }
		}
	}

	# Interaction effects on third party characters
	type vbox_character_interaction_other_effects = vbox {
		name = "other_effects"

		item = {
			vbox = {
				layoutpolicy_horizontal = expanding

				text_single = {
					layoutpolicy_horizontal = expanding
					visible = "[InteractionOtherEffect.IsList]"
					tooltip = "[InteractionOtherEffect.GetListTooltip]"
					raw_text = "List tooltip."
				}

				text_multi = {
					layoutpolicy_horizontal = expanding
					layoutpolicy_vertical = expanding
					autoresize = yes
					max_width = 450
					raw_text = "[InteractionOtherEffect.GetEffect]."
				}
			}
		}
	}

	type hbox_character_interaction_acceptance = hbox {
		name = "acceptance"
		visible = "[CharacterInteractionConfirmationWindow.ShouldShowAnswer]"
		margin = { 5 0 }

		widget = {
			name = "answer_chance"
			size = { 330 60 }
			layoutpolicy_horizontal = expanding
			tooltip = "[CharacterInteractionConfirmationWindow.GetAnswerReason]"

			background = {
				margin = { 10 0 }
				using = Background_Area_Dark
			}

			text_single = {
				visible = "[CharacterInteractionConfirmationWindow.IsForcedToAccept]"
				layoutpolicy_horizontal = expanding
				name = "answer"
				text = "ANSWER_REASON_AUTO_ACCEPT"
				default_format = "#color_green"
				using = Font_Size_Medium
				align = left
			}

			vbox = {
				# maximumsize = { 120 46 }
				# parentanchor = center
				visible = "[Not( CharacterInteractionConfirmationWindow.IsForcedToAccept )]"

				text_single = {
					layoutpolicy_horizontal = expanding
					name = "answer"
					raw_text = "[CharacterInteractionConfirmationWindow.GetAnswer]."
				}

				flowcontainer = {
					ignoreinvisible = yes
					layoutpolicy_horizontal = expanding

					text_single = {
						visible = "[And( Not( CharacterInteractionConfirmationWindow.IsAiMaybe ), Not( CharacterInteractionConfirmationWindow.GetRecipient.IsPlayer ) )]"
						name = "answer_score"
						text = "INTERACTION_ACCEPTANCE_SCORE"
					}

					text_single = {
						visible = "[And( And( CharacterInteractionConfirmationWindow.IsAiMaybe, Not( CharacterInteractionConfirmationWindow.GetRecipient.IsPlayer ) ), Or( Not( CharacterInteractionConfirmationWindow.IsAiAcceptNegotiation ), GreaterThan_int32( CharacterInteractionConfirmationWindow.GetAnswerScore, '(int32)0' ) ) )]"
						name = "answer_chance"
						text = "INTERACTION_ACCEPTANCE_CHANCE"
					}

					text_single = {
						raw_text = " "
					}

					text_single = {
						raw_text = "reasons, See tooltip."
					}
				}

				expand = { }
			}

			progressbar_standard = {
				position = { 0 3 }
				size = { 324 10 }
				parentanchor = bottom|hcenter
				visible = "[And( And( CharacterInteractionConfirmationWindow.IsAiMaybe, Not( CharacterInteractionConfirmationWindow.GetRecipient.IsPlayer ) ), Or( Not( CharacterInteractionConfirmationWindow.IsAiAcceptNegotiation ), GreaterThan_int32( CharacterInteractionConfirmationWindow.GetAnswerScore, '(int32)0' ) ) )]"
				value = "[CharacterInteractionConfirmationWindow.GetAnswerProgress]"
			}
		}
	}

	type text_multi_on_decline_summary = text_multi {
		autoresize = yes
		max_width = 500
		visible = "[CharacterInteractionConfirmationWindow.HasOnDeclineSummary]"
		text = "[CharacterInteractionConfirmationWindow.GetOnDeclineSummary]"
	}

	type vbox_scheme_info = vbox {
		name = "scheme_info"
		margin = {3 10 }

		hbox = {
			layoutpolicy_horizontal = expanding

			vbox = {
				layoutpolicy_horizontal = expanding
				margin = { 0 10 }

				hbox = {
					layoutpolicy_horizontal = expanding

					text_single = {
						text = "SCHEME_PREDICTION_NAME"
					}

					dot = {}

					expand = {}
				}
			}
		}

		vbox = { #summary
			layoutpolicy_horizontal = expanding

			hbox = {
				visible = "[InteractionSchemeInfo.HasSuccessDesc]"
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				min_width = 135
				tooltip = "SCHEME_PREDICTION_SUCCESS_TT"

				background = {
					using = Background_Area
				}

				text_single = {
					raw_text = "Success chance:"
				}

				text_single = {
					raw_text = " "
				}

				text_single = {
					name = "success"
					text = "SCHEME_PREDICTION_SUCCESS_CHANCE"
					using = Font_Size_Medium
				}

				dot = { }

				expand = { }
			}

			hbox = {
				layoutpolicy_vertical = expanding
				layoutpolicy_horizontal = expanding
				visible = "[InteractionSchemeInfo.IsSecret]"
				min_width = 135
				tooltip = "SCHEME_PREDICTION_SECRECY_TT"

				background = {
					using = Background_Area
				}

				text_single = {
					raw_text = "Secrecy:"
				}

				space = { }

				text_single = {
					name = "secrecy"
					text = "[InteractionSchemeInfo.GetSecrecy|%/V]"
				}

				dot = { }

				expand = { }
			}

			hbox = {
				name = "expected_time"
				layoutpolicy_vertical = expanding
				layoutpolicy_horizontal = expanding
				min_width = 135

				background = {
					using = Background_Area
				}

				text_single = {
					raw_text = "Expected time:"
				}

				space = { }

				text_single = {
					text = "[InteractionSchemeInfo.GetEstimatedTime]"
				}

				dot = { }

				expand = { }
				tooltip = "SCHEME_PREDICTION_ESTIMATED_TIME_TT"
			}

			flowcontainer = {
				layoutpolicy_horizontal = expanding
				visible = "[InteractionSchemeInfo.GetScheme.UsesAgents]"

				text_single = {
					text = "SCHEME_PREDICTION_AGENTS"
					tooltip = "SCHEME_PREDICTION_AGENTS_TT"
				}

				dot = { }
			}

		}

		hbox = {
			name = "on_success"
			visible = "[InteractionSchemeInfo.HasSuccessDesc]"
			layoutpolicy_horizontal = expanding

			background = {
				using = Background_Area
			}

			vbox = {
				layoutpolicy_horizontal = expanding
				spacing = 3

				text_single = {
					layoutpolicy_horizontal = expanding
					text = "SCHEME_PREDICTION_ON_SUCCESS"
					default_format = "#weak"
				}

				hbox = {
					layoutpolicy_horizontal = expanding

					text_multi = {
						layoutpolicy_horizontal = expanding
						max_width = 380
						autoresize = yes
						raw_text = "[InteractionSchemeInfo.GetSuccessDesc]."
					}

					expand = { }
				}
			}
		}

		hbox = {
			name = "on_discovery"
			visible = "[InteractionSchemeInfo.HasDiscoveryDesc]"
			layoutpolicy_horizontal = expanding

			background = {
				using = Background_Area
			}

			vbox = {
				layoutpolicy_horizontal = expanding
				spacing = 3

				text_single = {
					layoutpolicy_horizontal = expanding

					text = "SCHEME_PREDICTION_ON_DISCOVERY"

					default_format = "#weak"
				}

				hbox = {
					layoutpolicy_horizontal = expanding

					text_multi = {
						layoutpolicy_horizontal = expanding
						autoresize = yes
						max_width = 600
						raw_text = "[InteractionSchemeInfo.GetDiscoveryDesc]."
					}

					expand = { }
				}
			}
		}

		hbox = {
			layoutpolicy_horizontal = expanding

			background = {
				using = Background_Area
			}

			vbox = {
				layoutpolicy_horizontal = expanding
				spacing = 3

				hbox = {
					layoutpolicy_horizontal = expanding

					text_multi = {
						layoutpolicy_horizontal = expanding
						autoresize = yes
						max_width = 500
						text = "SCHEME_PREDICTION_EXPECTED_TIME_TEXT"
					}

					expand = { }
				}
			}
		}


		text_single = {
			visible = "[LessThanOrEqualTo_int32( InteractionSchemeInfo.GetSuccessChance, '(int32)0' )]"
			layoutpolicy_horizontal = expanding
			margin = { 0 10 }
			text = "SCHEME_PREDICTION_NO_SUCCESS"
			tooltip = "SCHEME_PREDICTION_SUCCESS_TT"
			using = Font_Size_Medium
			align = center

			background = {
				using = Background_Area
			}
		}

		text_single = {
			visible = "[InteractionSchemeInfo.IsReplace]"
			text = "INTERACTION_REPLACE_SCHEME"
			layoutpolicy_horizontal = expanding
			margin = { 0 10 }
			align = center

			background = {
				using = Background_Area
			}
		}
	}

	########################################
	type change_revert_buttons = vbox {

		button_text = {
			layoutpolicy_horizontal = expanding
		    blockoverride "text" {
		        raw_text = "Change character."
		    }
			block "ReplaceVisible"
			{
				visible = yes
			}
			block "ReplaceClick"
			{
				onclick = "[CharacterInteractionConfirmationWindow.OnChangeOrRevertActorCharacter]"
			}
		}

		button_text = {
			layoutpolicy_horizontal = expanding
			name = "revert"
			blockoverride "text" {
				raw_text = "Cancel."
			}
			alwaystransparent = no
			using = tooltip_below

			block "RevertClick"
			{
				# onclick = ?
			}

			block "RevertVisible"
			{
				visible = yes
			}
		}
	}


	## banner for character name and portrait
	type banner_with_portrait = vbox {
		name = "header_with_divider"
		layoutpolicy_horizontal = expanding
		spacing = 5
		margin = { 0 5 }

		background = {
			using = Background_Area_Dark
			alpha = 0.7
		}

		# divider_light = {
		# 	layoutpolicy_horizontal = growing
		# 	alpha = 0.5
		# }

		hbox = {
			layoutpolicy_horizontal = expanding
			layoutpolicy_vertical = expanding

			text_multi = {
				name = "header_with_divider_text"
				layoutpolicy_horizontal = expanding
				layoutpolicy_vertical = expanding
				margin = { 10 5 }

				autoresize = yes
				align = bottom|left
				max_width = 300

				block "banner_with_portrait_text" {
					raw_text = "#D Text#!"
				}
			}

			block "portrait" { }
		}

		# divider_light = {
		# 	layoutpolicy_horizontal = growing
		# 	alpha = 0.5
		# }
	}

	type hbox_interaction_option_levels = hbox
	{
		datamodel = "[RepeatedItem( Add_int32( OptionItem.GetNumLevels, '(int32)1' ) )]"

		# text_single = {
		# 	layoutpolicy_horizontal = expanding
		# 	raw_text = "Options:"
		# }

		item = {
			button_text = {
				layoutpolicy_horizontal = expanding
				blockoverride "pre" {
					text_single = {
						raw_text = "Can't pick,"
						visible = "[Not(And( OptionItem.IsValid, And( OptionItem.CanBeChanged, OptionItem.CanSetLevel( int32.GetInt ) ) ))]"
					}
					text_single = {
						raw_text = "Selected,"
						visible = "[EqualTo_int32( OptionItem.GetCurrentLevel, int32.GetInt)]" #TODO
					}
				}
				blockoverride "text" {
					raw_text = "[OptionItem.GetName]."
				}
				onclick = "[OptionItem.SetLevel( int32.GetInt )]"
				enabled = "[And( OptionItem.IsValid, And( OptionItem.CanBeChanged, OptionItem.CanSetLevel( int32.GetInt ) ) )]"
				tooltip = "[OptionItem.GetLevelTooltip( int32.GetInt )]"

				block "level_button"
				{
				}
			}
		}
	}

	# Options to consider before accepting and interaction
	type vbox_interaction_options = vbox {
		name = "options_grid"
		visible = "[CharacterInteractionConfirmationWindow.HasOptions]"

		block "margin"
		{

		}

		text_single = {
			visible = "[Not( StringIsEmpty(CharacterInteractionConfirmationWindow.GetOptionsHeading) )]"
			layoutpolicy_horizontal = expanding
			raw_text = "[CharacterInteractionConfirmationWindow.GetOptionsHeading]."
		}

		vbox = {
			name = "multiple_selection_options"
			visible = "[Not( CharacterInteractionConfirmationWindow.HasExclusiveOptions )]"
			layoutpolicy_horizontal = expanding
			datamodel = "[CharacterInteractionConfirmationWindow.GetOptionItems]"

			item = {
				vbox = {
					tooltip = "[OptionItem.GetTooltip]"
					using = tooltip_below
					layoutpolicy_horizontal = expanding
					visible = "[OptionItem.IsShown]"

					button_text = {
						layoutpolicy_horizontal = expanding
						visible = "[EqualTo_int32( OptionItem.GetNumLevels, '(int32)0' )]"
						blockoverride "pre" {
							text_single = {
								raw_text = "Can't pick,"
								visible = "[Not(And(OptionItem.IsValid, OptionItem.CanBeChanged))]"
							}
							text_single = {
								raw_text = "[Select_CString(OptionItem.HasOption, 'Checked', 'Unchecked')],"
								# visible = "[OptionItem.HasOption]" #TODO
							}
						}
						blockoverride "text" {
							raw_text = "[OptionItem.GetName]."
						}
						onclick = "[OptionItem.OnClick]"
						# enabled = "[And(OptionItem.IsValid, OptionItem.CanBeChanged)]"
						# enabled = "[And(OptionItem.IsValid, And(OptionItem.CanBeChanged, Not(OptionItem.HasOption)))]"
						enabled = "[And(OptionItem.IsValid, OptionItem.CanBeChanged)]"
						tooltip = "[OptionItem.GetTooltip]"
					}

					hbox_interaction_option_levels = {
						layoutpolicy_horizontal = expanding
						visible = "[GreaterThan_int32( OptionItem.GetNumLevels, '(int32)1' )]"
					}
				}
			}
		}

		vbox = {
			name = "exclusive_options"
			visible = "[CharacterInteractionConfirmationWindow.HasExclusiveOptions]"
			layoutpolicy_horizontal = expanding

			hbox = {
				name = "single_option"
				layoutpolicy_horizontal = expanding
				margin = { 10 0 }
				visible = "[EqualTo_int32( CharacterInteractionConfirmationWindow.GetVisibleOptionsCount, '(int32)1' )]"

				datacontext_from_model = {
					datamodel = "[CharacterInteractionConfirmationWindow.GetOptionItems]"
				}

				tooltip = "[OptionItem.GetTooltip]"
				using = tooltip_below

				text_single = {
					text = "[OptionItem.GetName]"
				}
			}

			vbox = {
				name = "multiple_options"
				layoutpolicy_horizontal = expanding
				datamodel = "[CharacterInteractionConfirmationWindow.GetOptionItems]"

				text_single = {
					layoutpolicy_horizontal = expanding
					raw_text = "[CountItems] Options:"

					hbox = {
						datamodel = "[CharacterInteractionConfirmationWindow.GetOptionItems]"
						name = "items"
						item = {
							hbox = {
								visible = "[OptionItem.IsShown]"
							}
						}
					}
				}

				item = {
					button_text = {
						layoutpolicy_horizontal = expanding
						visible = "[OptionItem.IsShown]"
						shortcuts_list = {
							blockoverride "click" {
								onclick = "[OptionItem.OnClick]"
								enabled = "[And(OptionItem.IsValid, OptionItem.CanBeChanged)]"
							}
						}
						blockoverride "pre" {
							text_single = {
								raw_text = "Can't pick,"
								visible = "[Not( And(OptionItem.IsValid, OptionItem.CanBeChanged) )]"
							}
							text_single = {
								raw_text = "Selected,"
								visible = "[OptionItem.HasOption]" #TODO
							}

							text_single = {
								raw_text = "[IndexNumber],"
							}
						}
						blockoverride "text" {
							raw_text = "[OptionItem.GetName]."
						}
						onclick = "[OptionItem.OnClick]"
						enabled = "[And(OptionItem.IsValid, OptionItem.CanBeChanged)]"
						tooltip = "[OptionItem.GetTooltip]"
					}
				}
			}
		}
	}
}

### CHARACTER LIST
types InteractionCharacterList
{
	type vbox_interaction_character_list = vbox {
		name = "character_list"
		block "visible" {
			visible = "[Not(CharacterInteractionConfirmationWindow.HasPickedCharacters)]"
		}

		text_single = {
			layoutpolicy_horizontal = expanding
			name = "select_someone_label"
			block "prompt" {
				raw_text = "[CharacterInteractionConfirmationWindow.GetPrompt]."
			}
		}

		### List
		vbox_character_list = {
			layoutpolicy_horizontal = expanding
			layoutpolicy_vertical = expanding

			blockoverride "claims_visibility"
			{
				visible = no
			}

			blockoverride "special_character"
			{
				vbox = {
					datacontext = "[CharacterInteractionConfirmationWindow.GetTopCharacterItem]"
					visible = "[CharacterInteractionConfirmationWindow.HasTopCharacterItem]"
					layoutpolicy_horizontal = expanding

					widget_character_list_item_finder = {
						layoutpolicy_horizontal = expanding
					}
				}
			}

			blockoverride "interaction_accept" {
				hbox = {
					visible = "[Not(CharacterInteractionConfirmationWindow.IsForcedToAccept)]"

					text_single = {
						visible = "[GreaterThan_CFixedPoint( CharacterInteractionConfirmationWindow.GetAcceptanceValue( CharacterListItem.Self ), '(CFixedPoint)0' )]"
						raw_text = "Accepts, [CharacterInteractionConfirmationWindow.GetAcceptanceValue( CharacterListItem.Self )]"
						# value = "[CharacterInteractionConfirmationWindow.GetAnswerScore]"
						tooltip = "[CharacterInteractionConfirmationWindow.GetAcceptanceBreakdown( CharacterListItem.Self )]"
						alwaystransparent = yes
					}


					### Will Not Accept ###
					text_single = {
						alwaystransparent = yes
						visible = "[LessThanOrEqualTo_CFixedPoint( CharacterInteractionConfirmationWindow.GetAcceptanceValue( CharacterListItem.Self ), '(CFixedPoint)0' )]"
						raw_text = "Refuses, [CharacterInteractionConfirmationWindow.GetAcceptanceValue( CharacterListItem.Self )]"
						# value = "[CharacterInteractionConfirmationWindow.GetAnswerScore]"
						tooltip = "[CharacterInteractionConfirmationWindow.GetAcceptanceBreakdown( CharacterListItem.Self )]"
					}
				}
			}
		}
	}
}

types OCR {
	type dynamicgridbox_interaction_list_ocr = dynamicgridbox {
		name = "interaction_list"
		datamodel_wrap = 15

		item = {
			container = {
				name = "interaction_widget"
				ignoreinvisible = yes

				container = {
					using = ocr
					ignoreinvisible = yes

					button_text = {
						visible = "[And(Not(InteractionItem.IsMarriageSetting), Not( And(GetVariableSystem.Exists('action_category'), Not(InteractionItem.IsCharacterInteraction)) ))]"
						tooltip = "[InteractionItem.GetTooltip]"
						enabled = "[InteractionItem.IsValid]"
						onclick = "[InteractionItem.OnClick]"
						onclick = "[GetVariableSystem.Set('more_category', InteractionCategoryItem.GetName)]"

						# widget = {
						# 	visible = "[Not(InteractionItem.IsCharacterInteraction)]"
						# 	state = {
						# 		name = show_more
						# 		on_finish = "[]"
						# 	}
						# }
						# tooltip_enabled = "[Not(InteractionItem.IsValid)]"
						blockoverride "text" {
							raw_text = "[InteractionItem.GetName]"
							alwaystransparent = yes
						}
						blockoverride "disabled" {
							visible = "[Not(InteractionItem.IsValid)]"
						}
						blockoverride "dot" { }

						blockoverride "extra" {

							text_single = {
								raw_text = ", Will not accept"
								visible = "[And(Not(InteractionItem.IsMore),Not(InteractionItem.IsPotentialAccept))]"
							}

							text_single = {
								raw_text = "Warning, see tooltip."
								visible = "[InteractionItem.HasWarningIcon]"
								tooltip = "[InteractionItem.GetWarningTooltipDesc]"
							}

							margin_right = 10
						}
					}

					button_checked_text = {
						visible = "[InteractionItem.IsMarriageSetting]"
						onclick = "[InteractionItem.OnClickCheckbox]"
						enabled = "[InteractionItem.CheckboxEnabled]"
						blockoverride "text" {
							text = "CHARACTER_INTERACTION_ALLOWED_TO_MARRY"
						}

						blockoverride "visible" {
							visible = "[EqualTo_int32(InteractionItem.GetCheckboxFrame, '(int32)1')]"
						}

						blockoverride "extra" {
							text_single = {
								raw_text = ", Tooltip."
								align = left
								tooltip = "[InteractionItem.GetCheckboxTooltip]"
							}
						}
					}
				}

				container = {
					name = "interaction_widget"
					using = vanilla
					ignoreinvisible = yes

					button_standard_hover = {
						name = "interaction_button"
						visible = "[Not(InteractionItem.IsMarriageSetting)]"
						enabled = "[InteractionItem.IsValid]"
						onclick = "[InteractionItem.OnClick]"

						disableframe = 8
						blockoverride "disabled" {}
						size = { 317 30 }

						tooltip = "[InteractionItem.GetTooltip]"
						using = tooltip_es

						hbox = {
							margin = { 10 0 }
							spacing = 5

							background = {
								name = "interaction_glow"
								visible = "[InteractionItem.IsHighlighted]"
								texture = "gfx/interface/component_tiles/tile_selected.dds"
								spriteType = corneredtiled
								spriteborder = { 25 25 }
							}

							icon = {
								visible = "[InteractionItem.IsCharacterInteraction]"
								name = "interaction_icon"
								size = { 30 30 }
								texture = "[InteractionItem.GetCharacterInteraction.GetIcon]"
							}

							text_single = {
								layoutpolicy_horizontal = expanding
								alwaystransparent = yes
								raw_text = "[Select_CString( InteractionItem.IsValid, '#clickable', '#weak' )] [InteractionItem.GetName]#!"
								align = nobaseline
								autoresize = no
							}

							hbox = {
								icon = {
									size = { 30 30 }
									name = "extra_icon"
									texture = "[InteractionItem.GetExtraIcon]"
									visible = "[InteractionItem.ShouldUseExtraIcon]"
								}

								icon = {
									name = "dont_accept"
									visible = "[And(Not(InteractionItem.IsMore),Not(InteractionItem.IsPotentialAccept))]"
									size = { 30 30 }
									texture = "gfx/interface/icons/symbols/icon_cross.dds"
								}

								warning_icon = {
									name = "warning_icon"
									size = { 25 25 }
									visible = "[InteractionItem.HasWarningIcon]"
									tooltip = "[InteractionItem.GetWarningTooltipDesc]"
								}
							}
						}
					}

					button_standard_hover = {
						visible = "[InteractionItem.IsMarriageSetting]"
						tooltip = "[InteractionItem.GetCheckboxTooltip]"
						onclick = "[InteractionItem.OnClickCheckbox]"
						size = { 317 30 }

						hbox = {
							margin_left = 10

							button_checkbox_label = {
								alwaystransparent = yes
								name = "button"
								size = { 30 30 }
								enabled = "[InteractionItem.CheckboxEnabled]"
								blockoverride "checkbox"
								{
									alwaystransparent = yes
									checked = "[EqualTo_int32(InteractionItem.GetCheckboxFrame, '(int32)2')]"
								}
								blockoverride "text"
								{
									text = "CHARACTER_INTERACTION_ALLOWED_TO_MARRY"
								}
							}
							expand = {}
						}
					}
				}
			}
		}
	}

	type flowcontainer_category_group_ocr = flowcontainer {
		visible = "[InteractionCategoryItem.IsVisible]"
		direction = vertical

		button_text = {
			onclick = "[GetVariableSystem.Set('action_category', InteractionCategoryItem.GetName)]"
			onclick = "[GetVariableSystem.Set('more_category', InteractionCategoryItem.GetName)]"
			onclick = "[InteractionCategoryItem.ShowMoreInteractions]"
			visible = "[Or(Not(GetVariableSystem.Exists('action_category')), GetVariableSystem.HasValue('action_category', 'yes'))]"
			blockoverride "text" {
				raw_text = "[GetDataModelSize(InteractionCategoryItem.GetInteractions)] [InteractionCategoryItem.GetName] actions."
			}
			enabled = "[Isnt('ocr')]"
		}

		flowcontainer = {
			direction = vertical
			visible = "[Or(Not(GetVariableSystem.Exists('action_category')), GetVariableSystem.HasValue('action_category', InteractionCategoryItem.GetName))]"
			# visible = "[GetVariableSystem.HasValue('action_category', InteractionCategoryItem.GetName)]"

			dynamicgridbox_interaction_list_ocr = {
				datamodel = "[InteractionCategoryItem.GetInteractions]"
			}
		}
	}
}

types VANILLA {
	type vbox_character_interaction_three_characters_old = vbox {
		margin = { 10 10 }

		background = {
			texture = "gfx/interface/illustrations/event_scenes/study.dds"
			alpha = 0.5
			fittype = centercrop
			using = Mask_Rough_Edges
		}

		hbox = {
			layoutpolicy_horizontal = expanding

			### Left
			portrait_shoulders = {
				name = "left_background_portrait"
				datacontext = "[CharacterInteractionConfirmationWindow.GetActor]"
				visible = "[Character.IsValid]"
			}

			vbox = {
				visible = "[CharacterInteractionConfirmationWindow.ShouldPickSecondaryActor]"
				layoutpolicy_vertical = expanding
				margin = { 10 10 }

				expand = {}

				portrait_head = {
					datacontext = "[CharacterInteractionConfirmationWindow.GetSecondaryActor]"
				}
			}

			### Right
			vbox = {
				visible = "[CharacterInteractionConfirmationWindow.ShouldShowSecondaryRecipient]"
				layoutpolicy_vertical = expanding
				margin = { 10 10 }

				expand = {}

				portrait_head = {
					datacontext = "[CharacterInteractionConfirmationWindow.GetSecondaryRecipient]"
				}
			}

			portrait_shoulders = {
				name = "right_background_portrait"
				datacontext = "[CharacterInteractionConfirmationWindow.GetRecipient]"
				visible = "[And( Character.IsValid, Not( ObjectsEqual( CharacterInteractionConfirmationWindow.GetActor, CharacterInteractionConfirmationWindow.GetRecipient ) ) )]"

			}
		}

		hbox = {
			layoutpolicy_horizontal = expanding
			spacing = 10
			allow_outside = yes

			text_label_center = {
				text = "INTERACTION_SENDER"
				min_width = 100
			}

			text_label_center = {
				visible = "[CharacterInteractionConfirmationWindow.ShouldPickSecondaryActor]"
				text = "[CharacterInteractionConfirmationWindow.GetActorSecondaryLabel]"
				min_width = 100
				allow_outside = yes

				change_revert_buttons = {
					parentanchor = vcenter
					position = { 60 -1 }

					blockoverride "ReplaceClick"
					{
						onclick = "[CharacterInteractionConfirmationWindow.OnChangeOrRevertActorCharacter]"
					}
					blockoverride "ReplaceVisible"
					{
						visible = "[CharacterInteractionConfirmationWindow.CanChangeActorCharacter]"
					}
					blockoverride "RevertClick"
					{
						onclick = "[CharacterInteractionConfirmationWindow.OnChangeOrRevertActorCharacter]"
					}
					blockoverride "RevertVisible"
					{
						visible = "[CharacterInteractionConfirmationWindow.CanRevertActorCharacter]"
					}
				}
			}

			text_label_center = {
				visible = "[CharacterInteractionConfirmationWindow.ShouldShowSecondaryRecipient]"
				text = "[CharacterInteractionConfirmationWindow.GetRecipientSecondaryLabel]"
				min_width = 100
				allow_outside = yes

				change_revert_buttons = {
					parentanchor = vcenter
					position = { 60 0 }

					blockoverride "ReplaceClick"
					{
						onclick = [CharacterInteractionConfirmationWindow.OnChangeOrRevertRecipientCharacter]
					}
					blockoverride "ReplaceVisible"
					{
						visible = [CharacterInteractionConfirmationWindow.CanChangeRecipientCharacter]
					}
					blockoverride "RevertClick"
					{
						onclick = [CharacterInteractionConfirmationWindow.OnChangeOrRevertRecipientCharacter]
					}
					blockoverride "RevertVisible"
					{
						visible = [CharacterInteractionConfirmationWindow.CanRevertRecipientCharacter]
					}
				}
			}

			text_label_center = {
				visible = "[Not( ObjectsEqual( CharacterInteractionConfirmationWindow.GetActor, CharacterInteractionConfirmationWindow.GetRecipient ) )]"
				text = "INTERACTION_RECIPIENT"
				min_width = 100
			}

		}
	}

	type widget_character_interaction_four_characters_old = widget {
		layoutpolicy_horizontal = expanding
		size = { 0 330 }

		block "bg_illustration_datacontext" {}

		# Temp background
		background = {
			alpha = 0.7
			fittype = centercrop

			using = Mask_Rough_Edges

			block "bg_illustration"
			{
				texture = "gfx/interface/illustrations/event_scenes/sittingroom.dds"
			}
		}

		### LEFT
		flowcontainer = {
			parentanchor = top|left
			position = { 20 20 }
			direction = vertical

			block "left_small_portrait"
			{
				datacontext = "[CharacterInteractionConfirmationWindow.GetActor]"
				visible = "[Character.IsValid]"
			}

			portrait_head = {
				name = "left_background_portrait"
				tooltip_enabled = "[Character.IsValid]"
			}

			text_label_center = {
				parentanchor = hcenter
				text = "INTERACTION_SENDER"
			}
		}

		widget = {
			position = { -110 0 }
			parentanchor = bottom|hcenter

			portrait_body = {
				name = "left_main_portrait"
				resizeparent = yes

				block "left_portrait"
				{
					datacontext = "[CharacterInteractionConfirmationWindow.GetSecondaryActor]"
				}

				tooltip_enabled = "[Character.IsValid]"

				blockoverride "status_icons" {}

				blockoverride "coa"
				{
					coa_realm_small_crown = {
						position = { -14 -40 }
						visible = "[Character.HasLandedTitles]"
						parentanchor = bottom
					}
				}

				blockoverride "portrait_button"
				{
					portrait_texture = "[Character.GetAnimatedPortrait('environment_body', 'camera_body', 'idle', PdxGetWidgetScreenSize(PdxGuiWidget.Self))]"
					mask = "gfx/portraits/portrait_mask_council.dds"
				}

				blockoverride "position_portrait_opinion_body" {
					position = { 0 -40 }
				}

				blockoverride "portrait_glow" {}

				background = {
					using = Background_Portrait_Glow
					color = { 0.8 0.7 0.5 0.6 }

					block "left_interaction_portrait_glow"
					{
						visible = "[CharacterInteractionConfirmationWindow.IsPickingSecondaryActor]"
					}
				}
			}

			text_label_center = {
				parentanchor = bottom|hcenter
				position = { 0 -13 }
				allow_outside = yes

				block "left_character_label"
				{
					text = "[CharacterInteractionConfirmationWindow.GetActorSecondaryLabel]"
				}

				container = {
					name = "tutorial_highlight_change_left_character"
					parentanchor = vcenter
					position = { -50 0 }

					button_round = {
						name = "tutorial_highlight_change_left_character"
						alwaystransparent = no
						tooltip = "CHANGE_CHARACTER"
						using = tooltip_below

						using = Animation_ShowHide_Quick


						block "button_left_change"
						{
							visible = "[CharacterInteractionConfirmationWindow.CanChangeActorCharacter]"
							onclick = "[CharacterInteractionConfirmationWindow.OnChangeOrRevertActorCharacter]"
						}

						button_replace = {
							parentanchor = center
							alwaystransparent = yes
						}
					}

					button_round = {
						name = "revert_left_character"
						alwaystransparent = no
						tooltip = "CANCEL"
						using = tooltip_below

						using = Animation_ShowHide_Quick


						block "button_left_revert"
						{
							visible = "[CharacterInteractionConfirmationWindow.CanRevertActorCharacter]"
							onclick = "[CharacterInteractionConfirmationWindow.OnChangeOrRevertActorCharacter]"
						}

						button_cancel = {
							parentanchor = center
							alwaystransparent = yes
						}
					}
				}
			}
		}

		### RIGHT
		flowcontainer = {
			parentanchor = top|right
			position = { -20 20 }
			direction = vertical

			block "right_small_portrait"
			{
				datacontext = "[CharacterInteractionConfirmationWindow.GetRecipient]"
				visible = "[Character.IsValid]"
			}

			portrait_head = {
				name = "right_background_portrait"
				tooltip_enabled = "[Character.IsValid]"

				blockoverride "portrait_transformation"
				{
					portrait_scale = { -1 1 }
					portrait_offset = { 1 0 }
				}

				blockoverride "status_icons" {}
			}

			text_label_center = {
				parentanchor = hcenter
				text = "INTERACTION_RECIPIENT"
			}
		}

		widget = {
			position = { 110 0 }
			parentanchor = bottom|hcenter

			portrait_body = {
				name = "right_main_portrait"
				tooltip_enabled = "[Character.IsValid]"
				resizeparent = yes

				block "right_portrait"
				{
					datacontext = "[CharacterInteractionConfirmationWindow.GetSecondaryRecipient]"
				}

				blockoverride "portrait_transformation"
				{
					portrait_scale = { -1 1 }
					portrait_offset = { 1 0 }
				}

				blockoverride "status_icons" {}

				blockoverride "coa" {
					coa_realm_small_crown = {
						position = { 14 -40 }
						visible = "[Character.HasLandedTitles]"
						parentanchor = bottom|right
					}
				}

				blockoverride "portrait_button"
				{
					portrait_texture = "[Character.GetAnimatedPortrait('environment_body', 'camera_body', 'idle', PdxGetWidgetScreenSize(PdxGuiWidget.Self))]"
					mask = "gfx/portraits/portrait_mask_council.dds"
				}

				blockoverride "position_portrait_opinion_body" {
					position = { 0 -40 }
				}

				blockoverride "portrait_glow" {}

				background = {
					using = Background_Portrait_Glow
					color = { 0.8 0.7 0.5 0.6 }

					block "right_interaction_portrait_glow"
					{
						visible = "[CharacterInteractionConfirmationWindow.IsPickingSecondaryRecipient]"
					}
				}

				blockoverride "glow_flip" {
					mirror = horizontal
				}
			}

			text_label_center = {
				parentanchor = bottom|hcenter
				position = { 0 -13 }
				allow_outside = yes

				block "right_character_label"
				{
					text = "INTERACTION_RECIPIENT"
				}

				container = {
					name = "tutorial_highlight_change_right_character"
					parentanchor = right|vcenter
					position = { 50 0 }

					button_round = {
						name = "change_right_character"
						alwaystransparent = no
						tooltip = "CHANGE_CHARACTER"
						using = tooltip_below

						using = Animation_ShowHide_Quick

						block "button_right_change"
						{
							visible = "[CharacterInteractionConfirmationWindow.CanChangeRecipientCharacter]"
							onclick = "[CharacterInteractionConfirmationWindow.OnChangeOrRevertRecipientCharacter]"
						}

						button_replace = {
							parentanchor = center
							alwaystransparent = yes
						}
					}

					button_round = {
						name = "revert_right_character"
						alwaystransparent = no
						tooltip = "CANCEL"
						using = tooltip_below

						using = Animation_ShowHide_Quick


						block "button_right_revert"
						{
							visible = "[CharacterInteractionConfirmationWindow.CanRevertActorCharacter]"
							onclick = "[CharacterInteractionConfirmationWindow.OnChangeOrRevertActorCharacter]"
						}

						button_cancel = {
							parentanchor = center
							alwaystransparent = yes
						}
					}
				}
			}
		}

		### CLEAR BUTTON
		container = {
			position = { 0 -6 }
			parentanchor = bottom|hcenter

			button_round = {
				name = "clear_marry_off_character"
				alwaystransparent = no
				tooltip = "CLEAR_MARRIED_CHARACTER"
				using = tooltip_below

				block "button_clear"
				{
					visible = "[CharacterInteractionConfirmationWindow.CanChangeActorCharacter]"
					enabled = "[CharacterInteractionConfirmationWindow.CanClear]"
					onclick = "[CharacterInteractionConfirmationWindow.OnClear]"
				}

				button_clear = {
					alwaystransparent = yes
					parentanchor = center
				}
			}
		}
	}

	type vbox_arrangement_interaction_send_offer_old = vbox {
		name = "send_offer_window"

		vbox_interaction_options = {
			blockoverride "margin"
			{
				margin_top = 4
			}
			layoutpolicy_horizontal = expanding
		}

		hbox_character_interaction_acceptance = {
			layoutpolicy_horizontal = expanding
		}

		text_multi_on_decline_summary = {}

		button_primary = {
			size = { 400 42 }
			block "button_content" {}
			onclick = "[MatchmakerInteractionWindow.Send]"
			enabled = "[CharacterInteractionConfirmationWindow.CanSend]"
			tooltip = "[CharacterInteractionConfirmationWindow.GetCanSendDescription]"
			clicksound = "event:/SFX/UI/Generic/sfx_ui_generic_confirm"
		}
	}

	type vbox_list_interaction_title_selection_old = vbox {
		# name = "titles_grid"
		datamodel = "[CharacterInteractionConfirmationWindow.GetTitles]"
		layoutpolicy_horizontal = expanding
		spacing = 3

		item = {
			widget = {
				name = "title_list_item"
				layoutpolicy_horizontal = expanding
				size = { 0 45 }

				button_standard = {
					name = "title_button"
					datacontext = "[InteractionTitleItem.GetTitle]"
					size = "[InteractionTitleItem.GetSize]"
					onclick = "[InteractionTitleItem.OnClick]"
					onrightclick = "[InteractionTitleItem.OnRightClick]"
					button_ignore = none
					down = "[InteractionTitleItem.IsSelected]"
					enabled = "[InteractionTitleItem.IsSelectable]"
					tooltip = "[InteractionTitleItem.GetTooltip]"
					using = tooltip_es
					parentanchor = right

					block "button_toggles" {
						enabled = "[InteractionTitleItem.IsSelectable]"
					}

					coa_title_tiny_crown = {
						position = { 0 -8 }
					}

					hbox = {
						margin_left = 45
						margin_right = 5

						text_single = {
							name = "text"
							layoutpolicy_horizontal = expanding
							text = "[InteractionTitleItem.GetTitle.GetNameNoTooltip]"
						}

						icon = {
							name = "pressed_claim"
							visible = "[GetPlayer.HasPressedClaimOnTitle( Title.Self )]"
							size = { 24 24 }
							texture = "gfx/interface/icons/title_status/icon_claim_pressed.dds"
							tooltip = "REVOKE_TITLE_PRESSED_CLAIM"
						}

						icon = {
							name = "unpressed_claim"
							visible = "[And(GetPlayer.HasClaimOnTitle( Title.Self ), Not(GetPlayer.HasPressedClaimOnTitle( Title.Self )))]"
							size = { 24 24 }
							texture = "gfx/interface/icons/title_status/icon_claim_unpressed.dds"
							tooltip = "REVOKE_TITLE_UNPRESSED_CLAIM"
						}

						icon = {
							name = "leased_out"
							visible = "[Title.HasLeasedOutVassal]"
							size = { 36 39 }
							texture = "gfx/interface/icons/icon_holding_church.dds"
							tooltip = "GRANT_TITLE_LEASED_OUT_VASSAL"
						}

						block "extra_title_items" {}
					}
				}
			}
		}
	}
}
